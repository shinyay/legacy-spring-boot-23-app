(this["webpackJsonptechbookstore-frontend"]=this["webpackJsonptechbookstore-frontend"]||[]).push([[0],{139:function(e,a,t){"use strict";t.r(a);var l=t(0),r=t.n(l),n=t(10),o=t.n(n),c=t(17),s=t(66),i=t(215),m=t(212),d=t(12),E=t(213),u=t(199),p=t(50),g=t(223),y=t(181),v=t(141),h=t(214),b=t(207),S=t(216),O=t(174),C=t(208),N=t(209),k=t(204),_=t(206),R=t(210),I=t(211),f=t(176),T=t(219),D=t(182),w=t(70),B=t(183),A=t(184),L=t(185),j=t(186),P=t(187),x=t(188),U=t(222),F=t(88);const z=t.n(F).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:8080/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}}),K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:a=0,size:t=10,sortBy:l="id",sortDir:r="asc",keyword:n=""}=e;return z.get("/books",{params:{page:a,size:t,sortBy:l,sortDir:r,keyword:n}})},W=()=>z.get("/inventory"),H=()=>z.get("/inventory/alerts"),G=()=>z.get("/inventory/out-of-stock"),V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{page:a=0,size:t=10,sortBy:l="orderDate",sortDir:r="desc",status:n,type:o,customerId:c,startDate:s,endDate:i,keyword:m}=e,d={page:a,size:t,sortBy:l,sortDir:r};return n&&(d.status=n),o&&(d.type=o),c&&(d.customerId=c),s&&(d.startDate=s),i&&(d.endDate=i),m&&(d.keyword=m),z.get("/orders",{params:d})},$=e=>z.get(`/orders/${e}`),M=e=>z.post(`/orders/${e}/confirm`),Y=e=>z.post(`/orders/${e}/pick`),J=e=>z.post(`/orders/${e}/ship`),q=e=>z.post(`/orders/${e}/deliver`),X=()=>z.get("/orders/stats/status-count");z.interceptors.request.use(e=>{const a=localStorage.getItem("authToken");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),z.interceptors.response.use(e=>e,e=>{var a;return 401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("authToken"),window.location.href="/login"),Promise.reject(e)});const Q="FETCH_BOOKS_START",Z="FETCH_BOOKS_SUCCESS",ee="FETCH_BOOKS_FAILURE",ae="FETCH_BOOK_START",te="FETCH_BOOK_SUCCESS",le="FETCH_BOOK_FAILURE",re="CREATE_BOOK_START",ne="CREATE_BOOK_SUCCESS",oe="CREATE_BOOK_FAILURE",ce="UPDATE_BOOK_START",se="UPDATE_BOOK_SUCCESS",ie="UPDATE_BOOK_FAILURE",me="DELETE_BOOK_START",de="DELETE_BOOK_SUCCESS",Ee="DELETE_BOOK_FAILURE",ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async a=>{a({type:Q});try{const t=await K(e);return a({type:Z,payload:t.data}),t.data}catch(r){var t,l;throw a({type:ee,payload:(null===(t=r.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||r.message}),r}}},pe=Object(O.a)(e=>({root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},searchBox:{marginBottom:e.spacing(2),display:"flex",gap:e.spacing(2),alignItems:"center"},levelChip:{minWidth:60},titleCell:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:200}}));var ge=function(){const e=pe(),a=Object(c.b)(),t=Object(c.c)(e=>{var a,t;return(null===(a=e.books)||void 0===a||null===(t=a.books)||void 0===t?void 0:t.content)||[]}),n=Object(c.c)(e=>{var a;return(null===(a=e.books)||void 0===a?void 0:a.loading)||!1}),o=Object(c.c)(e=>{var a;return null===(a=e.books)||void 0===a?void 0:a.error}),[s,i]=Object(l.useState)("");Object(l.useEffect)(()=>{a(ue({page:0,size:10,sortBy:"id",sortDir:"asc",keyword:s}))},[a,s]);const m=e=>{switch(e){case"BEGINNER":return"primary";case"INTERMEDIATE":return"secondary";default:return"default"}},d=e=>{switch(e){case"BEGINNER":return"\u521d\u7d1a";case"INTERMEDIATE":return"\u4e2d\u7d1a";case"ADVANCED":return"\u4e0a\u7d1a";default:return e}};return n&&0===t.length?r.a.createElement("div",{className:e.loading},r.a.createElement(f.a,null)):o?r.a.createElement(S.a,{p:2},r.a.createElement(p.a,{color:"error"},"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f: ",o)):r.a.createElement("div",{className:e.root},r.a.createElement(p.a,{variant:"h4",gutterBottom:!0},"\u66f8\u7c4d\u4e00\u89a7"),r.a.createElement("form",{onSubmit:e=>{e.preventDefault();a(ue({page:0,size:10,sortBy:"id",sortDir:"asc",keyword:s}))}},r.a.createElement(S.a,{className:e.searchBox},r.a.createElement(T.a,{label:"\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9",variant:"outlined",value:s,onChange:e=>{i(e.target.value)},placeholder:"\u30bf\u30a4\u30c8\u30eb\u3001ISBN\u3001\u8457\u8005\u540d\u3067\u691c\u7d22",style:{minWidth:300}}),r.a.createElement(D.a,{type:"submit",variant:"contained",color:"primary"},"\u691c\u7d22"))),r.a.createElement(w.a,{className:e.paper},r.a.createElement(B.a,null,r.a.createElement(A.a,{className:e.table},r.a.createElement(L.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a,null,"ID"),r.a.createElement(P.a,null,"ISBN-13"),r.a.createElement(P.a,null,"\u30bf\u30a4\u30c8\u30eb"),r.a.createElement(P.a,null,"\u51fa\u7248\u793e"),r.a.createElement(P.a,null,"\u767a\u884c\u65e5"),r.a.createElement(P.a,null,"\u5b9a\u4fa1"),r.a.createElement(P.a,null,"\u30ec\u30d9\u30eb"),r.a.createElement(P.a,null,"\u30a2\u30af\u30b7\u30e7\u30f3"))),r.a.createElement(x.a,null,t.map(a=>r.a.createElement(j.a,{key:a.id},r.a.createElement(P.a,null,a.id),r.a.createElement(P.a,null,a.isbn13),r.a.createElement(P.a,{className:e.titleCell},r.a.createElement(p.a,{variant:"body2",title:a.title},a.title)),r.a.createElement(P.a,null,a.publisherName),r.a.createElement(P.a,null,a.publicationDate?new Date(a.publicationDate).toLocaleDateString("ja-JP"):"-"),r.a.createElement(P.a,null,a.listPrice?`\xa5${a.listPrice.toLocaleString()}`:"-"),r.a.createElement(P.a,null,a.level&&r.a.createElement(U.a,{label:d(a.level),color:m(a.level),size:"small",className:e.levelChip})),r.a.createElement(P.a,null,r.a.createElement(D.a,{variant:"outlined",size:"small",color:"primary"},"\u8a73\u7d30")))))))))};const ye="FETCH_INVENTORY_START",ve="FETCH_INVENTORY_SUCCESS",he="FETCH_INVENTORY_FAILURE",be="FETCH_INVENTORY_ALERTS_START",Se="FETCH_INVENTORY_ALERTS_SUCCESS",Oe="FETCH_INVENTORY_ALERTS_FAILURE",Ce="RECEIVE_STOCK_START",Ne="RECEIVE_STOCK_SUCCESS",ke="RECEIVE_STOCK_FAILURE",_e="SELL_STOCK_START",Re="SELL_STOCK_SUCCESS",Ie="SELL_STOCK_FAILURE",fe=Object(O.a)(e=>({root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},actionButtons:{display:"flex",gap:e.spacing(1)},stockChip:{minWidth:60},titleCell:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:200}}));var Te=function(){const e=fe(),a=Object(c.b)(),t=Object(c.c)(e=>{var a;return(null===(a=e.inventory)||void 0===a?void 0:a.items)||[]}),n=Object(c.c)(e=>{var a;return(null===(a=e.inventory)||void 0===a?void 0:a.loading)||!1}),o=Object(c.c)(e=>{var a;return null===(a=e.inventory)||void 0===a?void 0:a.error});Object(l.useEffect)(()=>{a(async e=>{e({type:ye});try{const a=await W();return e({type:ve,payload:a.data}),a.data}catch(o){var a,t;throw e({type:he,payload:(null===(a=o.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||o.message}),o}})},[a]);const s=(e,a)=>e<=0?"secondary":a?"primary":"default";return n?r.a.createElement("div",{className:e.loading},r.a.createElement(f.a,null)):o?r.a.createElement(S.a,{p:2},r.a.createElement(p.a,{color:"error"},"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f: ",o)):r.a.createElement("div",{className:e.root},r.a.createElement(p.a,{variant:"h4",gutterBottom:!0},"\u5728\u5eab\u4e00\u89a7"),r.a.createElement(w.a,{className:e.paper},r.a.createElement(B.a,null,r.a.createElement(A.a,{className:e.table},r.a.createElement(L.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a,null,"\u66f8\u7c4d\u30bf\u30a4\u30c8\u30eb"),r.a.createElement(P.a,null,"ISBN-13"),r.a.createElement(P.a,{align:"right"},"\u5e97\u982d\u5728\u5eab"),r.a.createElement(P.a,{align:"right"},"\u5009\u5eab\u5728\u5eab"),r.a.createElement(P.a,{align:"right"},"\u4e88\u7d04\u6570"),r.a.createElement(P.a,{align:"right"},"\u5229\u7528\u53ef\u80fd\u5728\u5eab"),r.a.createElement(P.a,null,"\u5728\u5eab\u72b6\u6cc1"),r.a.createElement(P.a,null,"\u68da\u756a\u53f7"),r.a.createElement(P.a,null,"\u30a2\u30af\u30b7\u30e7\u30f3"))),r.a.createElement(x.a,null,t.map(a=>{return r.a.createElement(j.a,{key:a.id},r.a.createElement(P.a,{className:e.titleCell},r.a.createElement(p.a,{variant:"body2",title:a.bookTitle},a.bookTitle)),r.a.createElement(P.a,null,a.isbn13),r.a.createElement(P.a,{align:"right"},a.storeStock),r.a.createElement(P.a,{align:"right"},a.warehouseStock),r.a.createElement(P.a,{align:"right"},a.reservedCount),r.a.createElement(P.a,{align:"right"},r.a.createElement(p.a,{variant:"body2",color:a.availableStock<=0?"error":"textPrimary"},a.availableStock)),r.a.createElement(P.a,null,r.a.createElement(U.a,{label:(t=a.availableStock,l=a.lowStock,t<=0?"\u5728\u5eab\u5207\u308c":l?"\u5728\u5eab\u5c11":"\u5728\u5eab\u6709"),color:s(a.availableStock,a.lowStock),size:"small",className:e.stockChip})),r.a.createElement(P.a,null,a.locationCode||"-"),r.a.createElement(P.a,null,r.a.createElement("div",{className:e.actionButtons},r.a.createElement(D.a,{variant:"outlined",size:"small",color:"primary"},"\u5165\u8377"),r.a.createElement(D.a,{variant:"outlined",size:"small",color:"secondary"},"\u8ca9\u58f2"))));var t,l}),0===t.length&&r.a.createElement(j.a,null,r.a.createElement(P.a,{colSpan:9,align:"center"},r.a.createElement(p.a,{variant:"body2",color:"textSecondary"},"\u5728\u5eab\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"))))))))},De=t(194),we=t(195),Be=t(196),Ae=t(180),Le=t(221),je=t(217),Pe=t(197),xe=t(218),Ue=t(200),Fe=t(201),ze=t(202),Ke=t(203),We=t(189),He=t(190),Ge=t(191),Ve=t(192),$e=t(193),Me=t(198);const Ye="ORDERS_LOADING",Je="ORDERS_SUCCESS",qe="ORDERS_ERROR",Xe="ORDER_DETAIL_LOADING",Qe="ORDER_DETAIL_SUCCESS",Ze="ORDER_DETAIL_ERROR",ea="ORDER_CREATE_LOADING",aa="ORDER_CREATE_SUCCESS",ta="ORDER_CREATE_ERROR",la="ORDER_UPDATE_LOADING",ra="ORDER_UPDATE_SUCCESS",na="ORDER_UPDATE_ERROR",oa="ORDER_STATUS_COUNTS_LOADING",ca="ORDER_STATUS_COUNTS_SUCCESS",sa="ORDER_STATUS_COUNTS_ERROR",ia=()=>async e=>{e({type:oa});try{const a=await X();e({type:ca,payload:a.data})}catch(l){var a,t;e({type:sa,payload:(null===(a=l.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch order status counts"})}},ma=Object(O.a)(e=>({root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},searchBox:{marginBottom:e.spacing(2),display:"flex",gap:e.spacing(2),alignItems:"center",flexWrap:"wrap"},statusChip:{minWidth:80},orderNumberCell:{fontWeight:"bold",color:e.palette.primary.main},amountCell:{fontWeight:"bold",textAlign:"right"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:400},statusCard:{margin:e.spacing(1),textAlign:"center"},statusTitle:{fontSize:"2rem",fontWeight:"bold",color:e.palette.primary.main},actionButton:{margin:e.spacing(.5)}})),da={PENDING:"default",CONFIRMED:"primary",PICKING:"secondary",SHIPPED:"info",DELIVERED:"success",CANCELLED:"error"},Ea={PENDING:"\u4fdd\u7559\u4e2d",CONFIRMED:"\u78ba\u8a8d\u6e08\u307f",PICKING:"\u68b1\u5305\u4e2d",SHIPPED:"\u51fa\u8377\u6e08\u307f",DELIVERED:"\u914d\u9054\u5b8c\u4e86",CANCELLED:"\u30ad\u30e3\u30f3\u30bb\u30eb"},ua={WALK_IN:"\u5e97\u982d\u8ca9\u58f2",ONLINE:"\u30aa\u30f3\u30e9\u30a4\u30f3",PHONE:"\u96fb\u8a71\u6ce8\u6587"};var pa=function(){var e;const a=ma(),t=Object(c.b)(),{orders:n,selectedOrder:o,statusCounts:s,loading:i,detailLoading:m,updateLoading:d}=Object(c.c)(e=>e.orders),[E,u]=Object(l.useState)(""),[g,y]=Object(l.useState)(""),[v,h]=Object(l.useState)(""),[b,O]=Object(l.useState)(0),[C,N]=Object(l.useState)(10),[k]=Object(l.useState)("orderDate"),[_]=Object(l.useState)("desc"),[R,I]=Object(l.useState)(!1);Object(l.useEffect)(()=>{F(),t(ia())},[t,b,C,k,_,g,v]);const F=()=>{const e={page:b,size:C,sortBy:k,sortDir:_,keyword:E};g&&(e.status=g),v&&(e.type=v),t(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async a=>{a({type:Ye});try{const t=await V(e);a({type:Je,payload:t.data})}catch(r){var t,l;a({type:qe,payload:(null===(t=r.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||"Failed to fetch orders"})}}}(e))},z=()=>{O(0),F()},K=e=>{var a;t((a=e,async e=>{e({type:Xe});try{const t=await $(a);e({type:Qe,payload:t.data})}catch(r){var t,l;e({type:Ze,payload:(null===(t=r.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||"Failed to fetch order details"})}})),I(!0)},W=async(e,a)=>{try{switch(a){case"confirm":await t((l=e,async e=>{e({type:la});try{const a=await M(l);return e({type:ra,payload:a.data}),a.data}catch(r){var a,t;throw e({type:na,payload:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to confirm order"}),r}}));break;case"pick":await t((e=>async a=>{a({type:la});try{const t=await Y(e);return a({type:ra,payload:t.data}),t.data}catch(r){var t,l;throw a({type:na,payload:(null===(t=r.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||"Failed to pick order"}),r}})(e));break;case"ship":await t((e=>async a=>{a({type:la});try{const t=await J(e);return a({type:ra,payload:t.data}),t.data}catch(r){var t,l;throw a({type:na,payload:(null===(t=r.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||"Failed to ship order"}),r}})(e));break;case"deliver":await t((e=>async a=>{a({type:la});try{const t=await q(e);return a({type:ra,payload:t.data}),t.data}catch(r){var t,l;throw a({type:na,payload:(null===(t=r.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||"Failed to deliver order"}),r}})(e))}F(),t(ia())}catch(r){console.error("Failed to update order status:",r)}var l},H=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY"}).format(e),G=e=>new Date(e).toLocaleString("ja-JP");return i?r.a.createElement("div",{className:a.loading},r.a.createElement(f.a,null)):r.a.createElement("div",{className:a.root},r.a.createElement(p.a,{variant:"h4",gutterBottom:!0},"\u6ce8\u6587\u7ba1\u7406"),r.a.createElement(De.a,{container:!0,spacing:2,style:{marginBottom:16}},Object.entries(s).map(e=>{let[t,l]=e;return r.a.createElement(De.a,{item:!0,xs:12,sm:6,md:2,key:t},r.a.createElement(we.a,{className:a.statusCard},r.a.createElement(Be.a,null,r.a.createElement(p.a,{variant:"h6"},Ea[t.toUpperCase()]||t),r.a.createElement(p.a,{className:a.statusTitle},l))))})),r.a.createElement(S.a,{className:a.searchBox},r.a.createElement(T.a,{label:"\u691c\u7d22\uff08\u6ce8\u6587\u756a\u53f7\u3001\u9867\u5ba2ID\uff09",variant:"outlined",size:"small",value:E,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(),style:{minWidth:200}}),r.a.createElement(Ae.a,{variant:"outlined",size:"small",style:{minWidth:120}},r.a.createElement(Le.a,null,"\u30b9\u30c6\u30fc\u30bf\u30b9"),r.a.createElement(je.a,{value:g,onChange:e=>y(e.target.value),label:"\u30b9\u30c6\u30fc\u30bf\u30b9"},r.a.createElement(Pe.a,{value:""},"\u3059\u3079\u3066"),Object.entries(Ea).map(e=>{let[a,t]=e;return r.a.createElement(Pe.a,{key:a,value:a},t)}))),r.a.createElement(Ae.a,{variant:"outlined",size:"small",style:{minWidth:120}},r.a.createElement(Le.a,null,"\u6ce8\u6587\u30bf\u30a4\u30d7"),r.a.createElement(je.a,{value:v,onChange:e=>h(e.target.value),label:"\u6ce8\u6587\u30bf\u30a4\u30d7"},r.a.createElement(Pe.a,{value:""},"\u3059\u3079\u3066"),Object.entries(ua).map(e=>{let[a,t]=e;return r.a.createElement(Pe.a,{key:a,value:a},t)}))),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:z},"\u691c\u7d22"),r.a.createElement(D.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(Me.a,null),onClick:()=>{}},"\u65b0\u898f\u6ce8\u6587")),r.a.createElement(w.a,{className:a.paper},r.a.createElement(B.a,null,r.a.createElement(A.a,{className:a.table},r.a.createElement(L.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a,null,"\u6ce8\u6587\u756a\u53f7"),r.a.createElement(P.a,null,"\u6ce8\u6587\u65e5\u6642"),r.a.createElement(P.a,null,"\u9867\u5ba2ID"),r.a.createElement(P.a,null,"\u30bf\u30a4\u30d7"),r.a.createElement(P.a,null,"\u30b9\u30c6\u30fc\u30bf\u30b9"),r.a.createElement(P.a,{align:"right"},"\u91d1\u984d"),r.a.createElement(P.a,null,"\u30a2\u30af\u30b7\u30e7\u30f3"))),r.a.createElement(x.a,null,n.content.map(e=>r.a.createElement(j.a,{key:e.id},r.a.createElement(P.a,{className:a.orderNumberCell},e.orderNumber),r.a.createElement(P.a,null,G(e.orderDate)),r.a.createElement(P.a,null,e.customerId||"-"),r.a.createElement(P.a,null,ua[e.type]||e.type),r.a.createElement(P.a,null,r.a.createElement(U.a,{label:Ea[e.status]||e.status,color:da[e.status]||"default",size:"small",className:a.statusChip})),r.a.createElement(P.a,{className:a.amountCell},H(e.totalAmount)),r.a.createElement(P.a,null,(e=>{const t=[];switch(e.status){case"PENDING":t.push(r.a.createElement(D.a,{key:"confirm",size:"small",variant:"contained",color:"primary",startIcon:r.a.createElement(We.a,null),className:a.actionButton,onClick:()=>W(e.id,"confirm"),disabled:d},"\u78ba\u8a8d"));break;case"CONFIRMED":t.push(r.a.createElement(D.a,{key:"pick",size:"small",variant:"contained",color:"secondary",startIcon:r.a.createElement(He.a,null),className:a.actionButton,onClick:()=>W(e.id,"pick"),disabled:d},"\u68b1\u5305"));break;case"PICKING":t.push(r.a.createElement(D.a,{key:"ship",size:"small",variant:"contained",startIcon:r.a.createElement(Ge.a,null),className:a.actionButton,onClick:()=>W(e.id,"ship"),disabled:d},"\u51fa\u8377"));break;case"SHIPPED":t.push(r.a.createElement(D.a,{key:"deliver",size:"small",variant:"contained",color:"primary",startIcon:r.a.createElement(Ve.a,null),className:a.actionButton,onClick:()=>W(e.id,"deliver"),disabled:d},"\u914d\u9054\u5b8c\u4e86"))}return t.push(r.a.createElement(D.a,{key:"view",size:"small",variant:"outlined",startIcon:r.a.createElement($e.a,null),className:a.actionButton,onClick:()=>K(e.id)},"\u8a73\u7d30")),t})(e))))))),r.a.createElement(xe.a,{rowsPerPageOptions:[5,10,25],component:"div",count:n.totalElements,rowsPerPage:C,page:b,onChangePage:(e,a)=>{O(a)},onChangeRowsPerPage:e=>{N(parseInt(e.target.value,10)),O(0)},labelRowsPerPage:"\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u884c\u6570:",labelDisplayedRows:e=>{let{from:a,to:t,count:l}=e;return`${a}-${t} / ${-1!==l?l:`more than ${t}`}`}})),r.a.createElement(Ue.a,{open:R,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0},r.a.createElement(Fe.a,null,"\u6ce8\u6587\u8a73\u7d30"),r.a.createElement(ze.a,null,m?r.a.createElement(f.a,null):o?r.a.createElement(De.a,{container:!0,spacing:2},r.a.createElement(De.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,{variant:"h6"},"\u57fa\u672c\u60c5\u5831"),r.a.createElement(p.a,null,"\u6ce8\u6587\u756a\u53f7: ",o.orderNumber),r.a.createElement(p.a,null,"\u6ce8\u6587\u65e5\u6642: ",G(o.orderDate)),r.a.createElement(p.a,null,"\u9867\u5ba2ID: ",o.customerId||"-"),r.a.createElement(p.a,null,"\u6ce8\u6587\u30bf\u30a4\u30d7: ",ua[o.type]),r.a.createElement(p.a,null,"\u652f\u6255\u3044\u65b9\u6cd5: ",o.paymentMethod),r.a.createElement(p.a,null,"\u30b9\u30c6\u30fc\u30bf\u30b9:",r.a.createElement(U.a,{label:Ea[o.status],color:da[o.status],size:"small",style:{marginLeft:8}})),r.a.createElement(p.a,null,"\u5408\u8a08\u91d1\u984d: ",H(o.totalAmount)),o.notes&&r.a.createElement(p.a,null,"\u5099\u8003: ",o.notes)),r.a.createElement(De.a,{item:!0,xs:12,sm:6},r.a.createElement(p.a,{variant:"h6"},"\u9032\u6357\u60c5\u5831"),o.confirmedDate&&r.a.createElement(p.a,null,"\u78ba\u8a8d\u65e5\u6642: ",G(o.confirmedDate)),o.shippedDate&&r.a.createElement(p.a,null,"\u51fa\u8377\u65e5\u6642: ",G(o.shippedDate)),o.deliveredDate&&r.a.createElement(p.a,null,"\u914d\u9054\u65e5\u6642: ",G(o.deliveredDate))),r.a.createElement(De.a,{item:!0,xs:12},r.a.createElement(p.a,{variant:"h6"},"\u6ce8\u6587\u5546\u54c1"),r.a.createElement(A.a,{size:"small"},r.a.createElement(L.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a,null,"\u66f8\u7c4d\u540d"),r.a.createElement(P.a,null,"ISBN"),r.a.createElement(P.a,{align:"right"},"\u6570\u91cf"),r.a.createElement(P.a,{align:"right"},"\u5358\u4fa1"),r.a.createElement(P.a,{align:"right"},"\u5c0f\u8a08"))),r.a.createElement(x.a,null,null===(e=o.orderItems)||void 0===e?void 0:e.map(e=>r.a.createElement(j.a,{key:e.id},r.a.createElement(P.a,null,e.bookTitle),r.a.createElement(P.a,null,e.bookIsbn13),r.a.createElement(P.a,{align:"right"},e.quantity),r.a.createElement(P.a,{align:"right"},H(e.unitPrice)),r.a.createElement(P.a,{align:"right"},H(e.totalPrice)))))))):null),r.a.createElement(Ke.a,null,r.a.createElement(D.a,{onClick:()=>I(!1),color:"primary"},"\u9589\u3058\u308b"))))},ga=t(205);const ya=Object(O.a)(e=>({root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},card:{height:"100%"},statCard:{padding:e.spacing(2),display:"flex",alignItems:"center",gap:e.spacing(2)},statIcon:{fontSize:40,color:e.palette.primary.main},statNumber:{fontSize:"2rem",fontWeight:"bold",color:e.palette.text.primary},alertCard:{padding:e.spacing(2)},alertIcon:{color:e.palette.warning.main,marginRight:e.spacing(1)},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:200}}));var va=function(){const e=ya(),[a,t]=Object(l.useState)(!0),[n,o]=Object(l.useState)(null),[c,s]=Object(l.useState)({totalBooks:0,lowStockItems:0,outOfStock:0,pendingOrders:0}),[i,m]=Object(l.useState)([]),[d,E]=Object(l.useState)([]);Object(l.useEffect)(()=>{(async()=>{try{t(!0),o(null);const[e,a,l,r]=await Promise.all([K({page:0,size:5,sortBy:"id",sortDir:"desc"}),W(),H(),G()]),n=a.data,c=n.length,i=l.data.length,d=r.data.length,u=n.reduce((e,a)=>e+(a.reservedCount||0),0);s({totalBooks:c,lowStockItems:i,outOfStock:d,pendingOrders:u}),m(e.data.content||e.data||[]),E(l.data||[])}catch(l){var e,a;console.error("Error fetching dashboard data:",l),o((null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||l.message||"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}finally{t(!1)}})()},[]);const u=e=>{switch(e){case"BEGINNER":return"\u521d\u7d1a";case"INTERMEDIATE":return"\u4e2d\u7d1a";case"ADVANCED":return"\u4e0a\u7d1a";default:return"-"}},g=e=>{switch(e){case"BEGINNER":return"primary";case"INTERMEDIATE":return"secondary";default:return"default"}};return a?r.a.createElement("div",{className:e.loading},r.a.createElement(f.a,null)):n?r.a.createElement(S.a,{p:2},r.a.createElement(p.a,{color:"error"},"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f: ",n)):r.a.createElement("div",{className:e.root},r.a.createElement(p.a,{variant:"h4",gutterBottom:!0},"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9"),r.a.createElement(De.a,{container:!0,spacing:3},r.a.createElement(De.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(we.a,{className:e.card},r.a.createElement(Be.a,{className:e.statCard},r.a.createElement(k.a,{className:e.statIcon}),r.a.createElement(S.a,null,r.a.createElement(p.a,{className:e.statNumber},(null===c||void 0===c?void 0:c.totalBooks)||0),r.a.createElement(p.a,{variant:"body2",color:"textSecondary"},"\u7dcf\u66f8\u7c4d\u6570"))))),r.a.createElement(De.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(we.a,{className:e.card},r.a.createElement(Be.a,{className:e.statCard},r.a.createElement(ga.a,{className:e.statIcon,style:{color:"#ff9800"}}),r.a.createElement(S.a,null,r.a.createElement(p.a,{className:e.statNumber},(null===c||void 0===c?void 0:c.lowStockItems)||0),r.a.createElement(p.a,{variant:"body2",color:"textSecondary"},"\u5728\u5eab\u4e0d\u8db3"))))),r.a.createElement(De.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(we.a,{className:e.card},r.a.createElement(Be.a,{className:e.statCard},r.a.createElement(ga.a,{className:e.statIcon,style:{color:"#f44336"}}),r.a.createElement(S.a,null,r.a.createElement(p.a,{className:e.statNumber},(null===c||void 0===c?void 0:c.outOfStock)||0),r.a.createElement(p.a,{variant:"body2",color:"textSecondary"},"\u5728\u5eab\u5207\u308c"))))),r.a.createElement(De.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(we.a,{className:e.card},r.a.createElement(Be.a,{className:e.statCard},r.a.createElement(_.a,{className:e.statIcon}),r.a.createElement(S.a,null,r.a.createElement(p.a,{className:e.statNumber},(null===c||void 0===c?void 0:c.pendingOrders)||0),r.a.createElement(p.a,{variant:"body2",color:"textSecondary"},"\u4e88\u7d04\u5f85\u3061"))))),r.a.createElement(De.a,{item:!0,xs:12,md:6},r.a.createElement(we.a,{className:e.card},r.a.createElement(Be.a,null,r.a.createElement(p.a,{variant:"h6",gutterBottom:!0},"\u6700\u8fd1\u8ffd\u52a0\u3055\u308c\u305f\u66f8\u7c4d"),r.a.createElement(y.a,null,i.map(e=>r.a.createElement(v.a,{key:e.id},r.a.createElement(b.a,{primary:e.title,secondary:`ISBN: ${e.isbn13}`}),r.a.createElement(U.a,{label:u(e.level),color:g(e.level),size:"small"}))),0===i.length&&r.a.createElement(v.a,null,r.a.createElement(b.a,{primary:"\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093",secondary:"\u6700\u8fd1\u8ffd\u52a0\u3055\u308c\u305f\u66f8\u7c4d\u306f\u3042\u308a\u307e\u305b\u3093"})))))),r.a.createElement(De.a,{item:!0,xs:12,md:6},r.a.createElement(we.a,{className:e.card},r.a.createElement(Be.a,null,r.a.createElement(p.a,{variant:"h6",gutterBottom:!0},"\u5728\u5eab\u30a2\u30e9\u30fc\u30c8"),r.a.createElement(y.a,null,d.map(a=>r.a.createElement(v.a,{key:a.id},r.a.createElement(ga.a,{className:e.alertIcon}),r.a.createElement(b.a,{primary:a.bookTitle,secondary:`\u5728\u5eab\u6570: ${a.availableStock} / \u767a\u6ce8\u70b9: ${a.reorderPoint||"-"}`}))),0===d.length&&r.a.createElement(v.a,null,r.a.createElement(b.a,{primary:"\u30a2\u30e9\u30fc\u30c8\u306a\u3057",secondary:"\u73fe\u5728\u3001\u5728\u5eab\u30a2\u30e9\u30fc\u30c8\u306f\u3042\u308a\u307e\u305b\u3093"}))))))))};const ha=240,ba=Object(O.a)(e=>({root:{display:"flex"},appBar:{width:"calc(100% - 240px)",marginLeft:ha},drawer:{width:ha,flexShrink:0},drawerPaper:{width:ha},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}));var Sa=function(){const e=ba(),a=Object(d.f)(),[t,n]=Object(l.useState)("dashboard"),o=[{id:"dashboard",label:"\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9",icon:r.a.createElement(C.a,null),path:"/"},{id:"books",label:"\u66f8\u7c4d\u7ba1\u7406",icon:r.a.createElement(N.a,null),path:"/books"},{id:"inventory",label:"\u5728\u5eab\u7ba1\u7406",icon:r.a.createElement(k.a,null),path:"/inventory"},{id:"orders",label:"\u6ce8\u6587\u7ba1\u7406",icon:r.a.createElement(_.a,null),path:"/orders"},{id:"customers",label:"\u9867\u5ba2\u7ba1\u7406",icon:r.a.createElement(R.a,null),path:"/customers"},{id:"reports",label:"\u30ec\u30dd\u30fc\u30c8",icon:r.a.createElement(I.a,null),path:"/reports"}];return r.a.createElement("div",{className:e.root},r.a.createElement(m.a,null),r.a.createElement(E.a,{position:"fixed",className:e.appBar},r.a.createElement(u.a,null,r.a.createElement(p.a,{variant:"h6",noWrap:!0},"TechBookStore - \u6280\u8853\u5c02\u9580\u66f8\u5e97\u5728\u5eab\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0"))),r.a.createElement(g.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left"},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(y.a,null,o.map(e=>r.a.createElement(v.a,{button:!0,key:e.id,selected:t===e.id,onClick:()=>(e=>{n(e.id),a.push(e.path)})(e)},r.a.createElement(h.a,null,e.icon),r.a.createElement(b.a,{primary:e.label}))))),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(S.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:va}),r.a.createElement(d.a,{path:"/books",component:ge}),r.a.createElement(d.a,{path:"/inventory",component:Te}),r.a.createElement(d.a,{path:"/orders",component:pa}),r.a.createElement(d.a,{path:"/customers",render:()=>r.a.createElement("div",null,"\u9867\u5ba2\u7ba1\u7406\u30da\u30fc\u30b8\uff08\u958b\u767a\u4e2d\uff09")}),r.a.createElement(d.a,{path:"/reports",render:()=>r.a.createElement("div",null,"\u30ec\u30dd\u30fc\u30c8\u30da\u30fc\u30b8\uff08\u958b\u767a\u4e2d\uff09")})))))},Oa=t(37),Ca=t(93);const Na={books:[],selectedBook:null,loading:!1,error:null};var ka=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Q:case ae:case re:case ce:case me:return{...e,loading:!0,error:null};case Z:return{...e,loading:!1,books:a.payload,error:null};case te:return{...e,loading:!1,selectedBook:a.payload,error:null};case ne:return{...e,loading:!1,books:{...e.books,content:[a.payload,...e.books.content||[]],totalElements:(e.books.totalElements||0)+1},error:null};case se:return{...e,loading:!1,books:{...e.books,content:(e.books.content||[]).map(e=>e.id===a.payload.id?a.payload:e)},selectedBook:a.payload,error:null};case de:return{...e,loading:!1,books:{...e.books,content:(e.books.content||[]).filter(e=>e.id!==a.payload),totalElements:Math.max((e.books.totalElements||0)-1,0)},error:null};case ee:case le:case oe:case ie:case Ee:return{...e,loading:!1,error:a.payload};default:return e}};const _a={items:[],alerts:[],loading:!1,error:null};var Ra=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ye:case be:case Ce:case _e:return{...e,loading:!0,error:null};case ve:return{...e,loading:!1,items:a.payload,error:null};case Se:return{...e,loading:!1,alerts:a.payload,error:null};case Ne:case Re:return{...e,loading:!1,items:e.items.map(e=>e.bookId===a.payload.bookId?a.payload:e),error:null};case he:case Oe:case ke:case Ie:return{...e,loading:!1,error:a.payload};default:return e}};const Ia={orders:{content:[],totalElements:0,totalPages:0,number:0,size:10},selectedOrder:null,statusCounts:{pending:0,confirmed:0,picking:0,shipped:0,delivered:0,cancelled:0},loading:!1,detailLoading:!1,createLoading:!1,updateLoading:!1,statusCountsLoading:!1,error:null,detailError:null,createError:null,updateError:null,statusCountsError:null};var fa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Ye:return{...e,loading:!0,error:null};case Je:return{...e,loading:!1,orders:a.payload,error:null};case qe:return{...e,loading:!1,error:a.payload};case Xe:return{...e,detailLoading:!0,detailError:null};case Qe:return{...e,detailLoading:!1,selectedOrder:a.payload,detailError:null};case Ze:return{...e,detailLoading:!1,detailError:a.payload};case ea:return{...e,createLoading:!0,createError:null};case aa:return{...e,createLoading:!1,createError:null,orders:{...e.orders,content:[a.payload,...e.orders.content],totalElements:e.orders.totalElements+1}};case ta:return{...e,createLoading:!1,createError:a.payload};case la:return{...e,updateLoading:!0,updateError:null};case ra:return{...e,updateLoading:!1,updateError:null,selectedOrder:a.payload,orders:{...e.orders,content:e.orders.content.map(e=>e.id===a.payload.id?a.payload:e)}};case na:return{...e,updateLoading:!1,updateError:a.payload};case oa:return{...e,statusCountsLoading:!0,statusCountsError:null};case ca:return{...e,statusCountsLoading:!1,statusCounts:a.payload,statusCountsError:null};case sa:return{...e,statusCountsLoading:!1,statusCountsError:a.payload};default:return e}};var Ta=Object(Oa.c)({books:ka,inventory:Ra,orders:fa});const Da="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Oa.d;var wa=Object(Oa.e)(Ta,Da(Object(Oa.a)(Ca.a))),Ba=t(94);var Aa=Object(Ba.a)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{h6:{fontWeight:600}}});o.a.render(r.a.createElement(c.a,{store:wa},r.a.createElement(s.a,null,r.a.createElement(i.a,{theme:Aa},r.a.createElement(m.a,null),r.a.createElement(Sa,null)))),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.7c079781.chunk.js.map